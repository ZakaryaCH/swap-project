{"ast":null,"code":"var _jsxFileName = \"/Users/chichke/Documents/Work/Freelance/swap-project/src/pages/Vote/VotePage.tsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from 'react';\nimport { AutoColumn } from '../../components/Column';\nimport styled from 'styled-components';\nimport { TYPE, StyledInternalLink, ExternalLink } from '../../theme';\nimport { RowFixed, RowBetween } from '../../components/Row';\nimport { CardSection, DataCard } from '../../components/earn/styled';\nimport { ArrowLeft } from 'react-feather';\nimport { ButtonPrimary } from '../../components/Button';\nimport { ProposalStatus } from './styled';\nimport { useProposalData, useUserVotesAsOfBlock, useUserDelegatee } from '../../state/governance/hooks';\nimport { DateTime } from 'luxon';\nimport ReactMarkdown from 'react-markdown';\nimport VoteModal from '../../components/vote/VoteModal';\nimport { JSBI } from '@uniswap/sdk';\nimport { useActiveWeb3React } from '../../hooks';\nimport { AVERAGE_BLOCK_TIME_IN_SECS, COMMON_CONTRACT_NAMES, UNI, ZERO_ADDRESS } from '../../constants';\nimport { isAddress, getEtherscanLink } from '../../utils';\nimport { ApplicationModal } from '../../state/application/actions';\nimport { useModalOpen, useToggleDelegateModal, useToggleVoteModal, useBlockNumber } from '../../state/application/hooks';\nimport DelegateModal from '../../components/vote/DelegateModal';\nimport { GreyCard } from '../../components/Card';\nimport { useTokenBalance } from '../../state/wallet/hooks';\nimport useCurrentBlockTimestamp from 'hooks/useCurrentBlockTimestamp';\nimport { BigNumber } from 'ethers';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst PageWrapper = styled(AutoColumn)`\n  width: 100%;\n`;\n_c = PageWrapper;\nconst ProposalInfo = styled(AutoColumn)`\n  border: 1px solid ${({\n  theme\n}) => theme.bg4};\n  border-radius: 12px;\n  padding: 1.5rem;\n  position: relative;\n  max-width: 640px;\n  width: 100%;\n`;\n_c2 = ProposalInfo;\nconst ArrowWrapper = styled(StyledInternalLink)`\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  height: 24px;\n  color: ${({\n  theme\n}) => theme.text1};\n\n  a {\n    color: ${({\n  theme\n}) => theme.text1};\n    text-decoration: none;\n  }\n  :hover {\n    text-decoration: none;\n  }\n`;\n_c3 = ArrowWrapper;\nconst CardWrapper = styled.div`\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n  gap: 12px;\n  width: 100%;\n`;\n_c4 = CardWrapper;\nconst StyledDataCard = styled(DataCard)`\n  width: 100%;\n  background: none;\n  background-color: ${({\n  theme\n}) => theme.bg1};\n  height: fit-content;\n  z-index: 2;\n`;\n_c5 = StyledDataCard;\nconst ProgressWrapper = styled.div`\n  width: 100%;\n  margin-top: 1rem;\n  height: 4px;\n  border-radius: 4px;\n  background-color: ${({\n  theme\n}) => theme.bg3};\n  position: relative;\n`;\n_c6 = ProgressWrapper;\nconst Progress = styled.div`\n  height: 4px;\n  border-radius: 4px;\n  background-color: ${({\n  theme,\n  status\n}) => status === 'for' ? theme.green1 : theme.red1};\n  width: ${({\n  percentageString\n}) => percentageString};\n`;\n_c7 = Progress;\nconst MarkDownWrapper = styled.div`\n  max-width: 640px;\n  overflow: hidden;\n`;\n_c8 = MarkDownWrapper;\nconst WrapSmall = styled(RowBetween)`\n  ${({\n  theme\n}) => theme.mediaWidth.upToSmall`\n    align-items: flex-start;\n    flex-direction: column;\n  `};\n`;\n_c9 = WrapSmall;\nconst DetailText = styled.div`\n  word-break: break-all;\n`;\n_c10 = DetailText;\nconst ProposerAddressLink = styled(ExternalLink)`\n  word-break: break-all;\n`;\n_c11 = ProposerAddressLink;\nexport default function VotePage({\n  match: {\n    params: {\n      id\n    }\n  }\n}) {\n  _s();\n\n  var _proposalData$startBl, _proposalData$status, _proposalData$details;\n\n  const {\n    chainId,\n    account\n  } = useActiveWeb3React(); // get data for this specific proposal\n\n  const proposalData = useProposalData(id); // update support based on button interactions\n\n  const [support, setSupport] = useState(true); // modal for casting votes\n\n  const showVoteModal = useModalOpen(ApplicationModal.VOTE);\n  const toggleVoteModal = useToggleVoteModal(); // toggle for showing delegation modal\n\n  const showDelegateModal = useModalOpen(ApplicationModal.DELEGATE);\n  const toggleDelegateModal = useToggleDelegateModal(); // get and format date from data\n\n  const currentTimestamp = useCurrentBlockTimestamp();\n  const currentBlock = useBlockNumber();\n  const endDate = proposalData && currentTimestamp && currentBlock ? DateTime.fromSeconds(currentTimestamp.add(BigNumber.from(AVERAGE_BLOCK_TIME_IN_SECS).mul(BigNumber.from(proposalData.endBlock - currentBlock))).toNumber()) : undefined;\n  const now = DateTime.local(); // get total votes and format percentages for UI\n\n  const totalVotes = proposalData ? proposalData.forCount + proposalData.againstCount : undefined;\n  const forPercentage = proposalData && totalVotes ? (proposalData.forCount * 100 / totalVotes).toFixed(0) + '%' : '0%';\n  const againstPercentage = proposalData && totalVotes ? (proposalData.againstCount * 100 / totalVotes).toFixed(0) + '%' : '0%'; // only count available votes as of the proposal start block\n\n  const availableVotes = useUserVotesAsOfBlock((_proposalData$startBl = proposalData === null || proposalData === void 0 ? void 0 : proposalData.startBlock) !== null && _proposalData$startBl !== void 0 ? _proposalData$startBl : undefined); // only show voting if user has > 0 votes at proposal start block and proposal is active,\n\n  const showVotingButtons = availableVotes && JSBI.greaterThan(availableVotes.raw, JSBI.BigInt(0)) && proposalData && proposalData.status === 'active';\n  const uniBalance = useTokenBalance(account !== null && account !== void 0 ? account : undefined, chainId ? UNI[chainId] : undefined);\n  const userDelegatee = useUserDelegatee(); // in blurb link to home page if they are able to unlock\n\n  const showLinkForUnlock = Boolean(uniBalance && JSBI.notEqual(uniBalance.raw, JSBI.BigInt(0)) && userDelegatee === ZERO_ADDRESS); // show links in propsoal details if content is an address\n  // if content is contract with common name, replace address with common name\n\n  const linkIfAddress = content => {\n    if (isAddress(content) && chainId) {\n      var _COMMON_CONTRACT_NAME;\n\n      const commonName = (_COMMON_CONTRACT_NAME = COMMON_CONTRACT_NAMES[content]) !== null && _COMMON_CONTRACT_NAME !== void 0 ? _COMMON_CONTRACT_NAME : content;\n      return /*#__PURE__*/_jsxDEV(ExternalLink, {\n        href: getEtherscanLink(chainId, content, 'address'),\n        children: commonName\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 14\n      }, this);\n    }\n\n    return /*#__PURE__*/_jsxDEV(\"span\", {\n      children: content\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 12\n    }, this);\n  };\n\n  return /*#__PURE__*/_jsxDEV(PageWrapper, {\n    gap: \"lg\",\n    justify: \"center\",\n    children: [/*#__PURE__*/_jsxDEV(VoteModal, {\n      isOpen: showVoteModal,\n      onDismiss: toggleVoteModal,\n      proposalId: proposalData === null || proposalData === void 0 ? void 0 : proposalData.id,\n      support: support\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(DelegateModal, {\n      isOpen: showDelegateModal,\n      onDismiss: toggleDelegateModal,\n      title: \"Unlock Votes\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(ProposalInfo, {\n      gap: \"lg\",\n      justify: \"start\",\n      children: [/*#__PURE__*/_jsxDEV(RowBetween, {\n        style: {\n          width: '100%'\n        },\n        children: [/*#__PURE__*/_jsxDEV(ArrowWrapper, {\n          to: \"/vote\",\n          children: [/*#__PURE__*/_jsxDEV(ArrowLeft, {\n            size: 20\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 182,\n            columnNumber: 13\n          }, this), \" All Proposals\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 181,\n          columnNumber: 11\n        }, this), proposalData && /*#__PURE__*/_jsxDEV(ProposalStatus, {\n          status: (_proposalData$status = proposalData === null || proposalData === void 0 ? void 0 : proposalData.status) !== null && _proposalData$status !== void 0 ? _proposalData$status : '',\n          children: proposalData === null || proposalData === void 0 ? void 0 : proposalData.status\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 184,\n          columnNumber: 28\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(AutoColumn, {\n        gap: \"10px\",\n        style: {\n          width: '100%'\n        },\n        children: [/*#__PURE__*/_jsxDEV(TYPE.largeHeader, {\n          style: {\n            marginBottom: '.5rem'\n          },\n          children: proposalData === null || proposalData === void 0 ? void 0 : proposalData.title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 187,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(RowBetween, {\n          children: /*#__PURE__*/_jsxDEV(TYPE.main, {\n            children: endDate && endDate < now ? 'Voting ended ' + (endDate && endDate.toLocaleString(DateTime.DATETIME_FULL)) : proposalData ? 'Voting ends approximately ' + (endDate && endDate.toLocaleString(DateTime.DATETIME_FULL)) : ''\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 189,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 188,\n          columnNumber: 11\n        }, this), proposalData && proposalData.status === 'active' && !showVotingButtons && /*#__PURE__*/_jsxDEV(GreyCard, {\n          children: /*#__PURE__*/_jsxDEV(TYPE.black, {\n            children: [\"Only UNI votes that were self delegated or delegated to another address before block\", ' ', proposalData.startBlock, \" are eligible for voting.\", ' ', showLinkForUnlock && /*#__PURE__*/_jsxDEV(\"span\", {\n              children: [/*#__PURE__*/_jsxDEV(StyledInternalLink, {\n                to: \"/vote\",\n                children: \"Unlock voting\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 204,\n                columnNumber: 21\n              }, this), \" to prepare for the next proposal.\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 203,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 199,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 198,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 9\n      }, this), showVotingButtons ? /*#__PURE__*/_jsxDEV(RowFixed, {\n        style: {\n          width: '100%',\n          gap: '12px'\n        },\n        children: [/*#__PURE__*/_jsxDEV(ButtonPrimary, {\n          padding: \"8px\",\n          borderRadius: \"8px\",\n          onClick: () => {\n            setSupport(true);\n            toggleVoteModal();\n          },\n          children: \"Vote For\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 213,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(ButtonPrimary, {\n          padding: \"8px\",\n          borderRadius: \"8px\",\n          onClick: () => {\n            setSupport(false);\n            toggleVoteModal();\n          },\n          children: \"Vote Against\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 223,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 212,\n        columnNumber: 11\n      }, this) : '', /*#__PURE__*/_jsxDEV(CardWrapper, {\n        children: [/*#__PURE__*/_jsxDEV(StyledDataCard, {\n          children: /*#__PURE__*/_jsxDEV(CardSection, {\n            children: [/*#__PURE__*/_jsxDEV(AutoColumn, {\n              gap: \"md\",\n              children: /*#__PURE__*/_jsxDEV(WrapSmall, {\n                children: [/*#__PURE__*/_jsxDEV(TYPE.black, {\n                  fontWeight: 600,\n                  children: \"For\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 242,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(TYPE.black, {\n                  fontWeight: 600,\n                  children: [' ', proposalData === null || proposalData === void 0 ? void 0 : proposalData.forCount.toLocaleString(undefined, {\n                    maximumFractionDigits: 0\n                  })]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 243,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 241,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 240,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(ProgressWrapper, {\n              children: /*#__PURE__*/_jsxDEV(Progress, {\n                status: 'for',\n                percentageString: forPercentage\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 250,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 249,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 239,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 238,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(StyledDataCard, {\n          children: /*#__PURE__*/_jsxDEV(CardSection, {\n            children: [/*#__PURE__*/_jsxDEV(AutoColumn, {\n              gap: \"md\",\n              children: /*#__PURE__*/_jsxDEV(WrapSmall, {\n                children: [/*#__PURE__*/_jsxDEV(TYPE.black, {\n                  fontWeight: 600,\n                  children: \"Against\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 258,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(TYPE.black, {\n                  fontWeight: 600,\n                  children: proposalData === null || proposalData === void 0 ? void 0 : proposalData.againstCount.toLocaleString(undefined, {\n                    maximumFractionDigits: 0\n                  })\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 259,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 257,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 256,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(ProgressWrapper, {\n              children: /*#__PURE__*/_jsxDEV(Progress, {\n                status: 'against',\n                percentageString: againstPercentage\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 265,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 264,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 255,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 254,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 237,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(AutoColumn, {\n        gap: \"md\",\n        children: [/*#__PURE__*/_jsxDEV(TYPE.mediumHeader, {\n          fontWeight: 600,\n          children: \"Details\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 271,\n          columnNumber: 11\n        }, this), proposalData === null || proposalData === void 0 ? void 0 : (_proposalData$details = proposalData.details) === null || _proposalData$details === void 0 ? void 0 : _proposalData$details.map((d, i) => {\n          return /*#__PURE__*/_jsxDEV(DetailText, {\n            children: [i + 1, \": \", linkIfAddress(d.target), \".\", d.functionSig, \"(\", d.callData.split(',').map((content, i) => {\n              return /*#__PURE__*/_jsxDEV(\"span\", {\n                children: [linkIfAddress(content), d.callData.split(',').length - 1 === i ? '' : ',']\n              }, i, true, {\n                fileName: _jsxFileName,\n                lineNumber: 278,\n                columnNumber: 21\n              }, this);\n            }), \")\"]\n          }, i, true, {\n            fileName: _jsxFileName,\n            lineNumber: 274,\n            columnNumber: 15\n          }, this);\n        })]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 270,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(AutoColumn, {\n        gap: \"md\",\n        children: [/*#__PURE__*/_jsxDEV(TYPE.mediumHeader, {\n          fontWeight: 600,\n          children: \"Description\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 290,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(MarkDownWrapper, {\n          children: /*#__PURE__*/_jsxDEV(ReactMarkdown, {\n            source: proposalData === null || proposalData === void 0 ? void 0 : proposalData.description\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 292,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 291,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 289,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(AutoColumn, {\n        gap: \"md\",\n        children: [/*#__PURE__*/_jsxDEV(TYPE.mediumHeader, {\n          fontWeight: 600,\n          children: \"Proposer\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 296,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(ProposerAddressLink, {\n          href: (proposalData === null || proposalData === void 0 ? void 0 : proposalData.proposer) && chainId ? getEtherscanLink(chainId, proposalData === null || proposalData === void 0 ? void 0 : proposalData.proposer, 'address') : '',\n          children: /*#__PURE__*/_jsxDEV(ReactMarkdown, {\n            source: proposalData === null || proposalData === void 0 ? void 0 : proposalData.proposer\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 300,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 297,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 295,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 176,\n    columnNumber: 5\n  }, this);\n}\n\n_s(VotePage, \"Jmj7TeHWmExbN+eq46TWbqDhNuM=\", false, function () {\n  return [useActiveWeb3React, useProposalData, useModalOpen, useToggleVoteModal, useModalOpen, useToggleDelegateModal, useCurrentBlockTimestamp, useBlockNumber, useUserVotesAsOfBlock, useTokenBalance, useUserDelegatee];\n});\n\n_c12 = VotePage;\n\nvar _c, _c2, _c3, _c4, _c5, _c6, _c7, _c8, _c9, _c10, _c11, _c12;\n\n$RefreshReg$(_c, \"PageWrapper\");\n$RefreshReg$(_c2, \"ProposalInfo\");\n$RefreshReg$(_c3, \"ArrowWrapper\");\n$RefreshReg$(_c4, \"CardWrapper\");\n$RefreshReg$(_c5, \"StyledDataCard\");\n$RefreshReg$(_c6, \"ProgressWrapper\");\n$RefreshReg$(_c7, \"Progress\");\n$RefreshReg$(_c8, \"MarkDownWrapper\");\n$RefreshReg$(_c9, \"WrapSmall\");\n$RefreshReg$(_c10, \"DetailText\");\n$RefreshReg$(_c11, \"ProposerAddressLink\");\n$RefreshReg$(_c12, \"VotePage\");","map":{"version":3,"sources":["/Users/chichke/Documents/Work/Freelance/swap-project/src/pages/Vote/VotePage.tsx"],"names":["React","useState","AutoColumn","styled","TYPE","StyledInternalLink","ExternalLink","RowFixed","RowBetween","CardSection","DataCard","ArrowLeft","ButtonPrimary","ProposalStatus","useProposalData","useUserVotesAsOfBlock","useUserDelegatee","DateTime","ReactMarkdown","VoteModal","JSBI","useActiveWeb3React","AVERAGE_BLOCK_TIME_IN_SECS","COMMON_CONTRACT_NAMES","UNI","ZERO_ADDRESS","isAddress","getEtherscanLink","ApplicationModal","useModalOpen","useToggleDelegateModal","useToggleVoteModal","useBlockNumber","DelegateModal","GreyCard","useTokenBalance","useCurrentBlockTimestamp","BigNumber","PageWrapper","ProposalInfo","theme","bg4","ArrowWrapper","text1","CardWrapper","div","StyledDataCard","bg1","ProgressWrapper","bg3","Progress","status","green1","red1","percentageString","MarkDownWrapper","WrapSmall","mediaWidth","upToSmall","DetailText","ProposerAddressLink","VotePage","match","params","id","chainId","account","proposalData","support","setSupport","showVoteModal","VOTE","toggleVoteModal","showDelegateModal","DELEGATE","toggleDelegateModal","currentTimestamp","currentBlock","endDate","fromSeconds","add","from","mul","endBlock","toNumber","undefined","now","local","totalVotes","forCount","againstCount","forPercentage","toFixed","againstPercentage","availableVotes","startBlock","showVotingButtons","greaterThan","raw","BigInt","uniBalance","userDelegatee","showLinkForUnlock","Boolean","notEqual","linkIfAddress","content","commonName","width","marginBottom","title","toLocaleString","DATETIME_FULL","gap","maximumFractionDigits","details","map","d","i","target","functionSig","callData","split","length","description","proposer"],"mappings":"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","sourcesContent":["import React, { useState } from 'react'\nimport { AutoColumn } from '../../components/Column'\nimport styled from 'styled-components'\n\nimport { RouteComponentProps } from 'react-router-dom'\nimport { TYPE, StyledInternalLink, ExternalLink } from '../../theme'\nimport { RowFixed, RowBetween } from '../../components/Row'\nimport { CardSection, DataCard } from '../../components/earn/styled'\nimport { ArrowLeft } from 'react-feather'\nimport { ButtonPrimary } from '../../components/Button'\nimport { ProposalStatus } from './styled'\nimport { useProposalData, useUserVotesAsOfBlock, ProposalData, useUserDelegatee } from '../../state/governance/hooks'\nimport { DateTime } from 'luxon'\nimport ReactMarkdown from 'react-markdown'\nimport VoteModal from '../../components/vote/VoteModal'\nimport { TokenAmount, JSBI } from '@uniswap/sdk'\nimport { useActiveWeb3React } from '../../hooks'\nimport { AVERAGE_BLOCK_TIME_IN_SECS, COMMON_CONTRACT_NAMES, UNI, ZERO_ADDRESS } from '../../constants'\nimport { isAddress, getEtherscanLink } from '../../utils'\nimport { ApplicationModal } from '../../state/application/actions'\nimport { useModalOpen, useToggleDelegateModal, useToggleVoteModal, useBlockNumber } from '../../state/application/hooks'\nimport DelegateModal from '../../components/vote/DelegateModal'\nimport { GreyCard } from '../../components/Card'\nimport { useTokenBalance } from '../../state/wallet/hooks'\nimport useCurrentBlockTimestamp from 'hooks/useCurrentBlockTimestamp'\nimport { BigNumber } from 'ethers'\n\nconst PageWrapper = styled(AutoColumn)`\n  width: 100%;\n`\n\nconst ProposalInfo = styled(AutoColumn)`\n  border: 1px solid ${({ theme }) => theme.bg4};\n  border-radius: 12px;\n  padding: 1.5rem;\n  position: relative;\n  max-width: 640px;\n  width: 100%;\n`\nconst ArrowWrapper = styled(StyledInternalLink)`\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  height: 24px;\n  color: ${({ theme }) => theme.text1};\n\n  a {\n    color: ${({ theme }) => theme.text1};\n    text-decoration: none;\n  }\n  :hover {\n    text-decoration: none;\n  }\n`\nconst CardWrapper = styled.div`\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n  gap: 12px;\n  width: 100%;\n`\n\nconst StyledDataCard = styled(DataCard)`\n  width: 100%;\n  background: none;\n  background-color: ${({ theme }) => theme.bg1};\n  height: fit-content;\n  z-index: 2;\n`\n\nconst ProgressWrapper = styled.div`\n  width: 100%;\n  margin-top: 1rem;\n  height: 4px;\n  border-radius: 4px;\n  background-color: ${({ theme }) => theme.bg3};\n  position: relative;\n`\n\nconst Progress = styled.div<{ status: 'for' | 'against'; percentageString?: string }>`\n  height: 4px;\n  border-radius: 4px;\n  background-color: ${({ theme, status }) => (status === 'for' ? theme.green1 : theme.red1)};\n  width: ${({ percentageString }) => percentageString};\n`\n\nconst MarkDownWrapper = styled.div`\n  max-width: 640px;\n  overflow: hidden;\n`\n\nconst WrapSmall = styled(RowBetween)`\n  ${({ theme }) => theme.mediaWidth.upToSmall`\n    align-items: flex-start;\n    flex-direction: column;\n  `};\n`\n\nconst DetailText = styled.div`\n  word-break: break-all;\n`\n\nconst ProposerAddressLink = styled(ExternalLink)`\n  word-break: break-all;\n`\n\nexport default function VotePage({\n  match: {\n    params: { id }\n  }\n}: RouteComponentProps<{ id: string }>) {\n  const { chainId, account } = useActiveWeb3React()\n\n  // get data for this specific proposal\n  const proposalData: ProposalData | undefined = useProposalData(id)\n\n  // update support based on button interactions\n  const [support, setSupport] = useState<boolean>(true)\n\n  // modal for casting votes\n  const showVoteModal = useModalOpen(ApplicationModal.VOTE)\n  const toggleVoteModal = useToggleVoteModal()\n\n  // toggle for showing delegation modal\n  const showDelegateModal = useModalOpen(ApplicationModal.DELEGATE)\n  const toggleDelegateModal = useToggleDelegateModal()\n\n  // get and format date from data\n  const currentTimestamp = useCurrentBlockTimestamp()\n  const currentBlock = useBlockNumber()\n  const endDate: DateTime | undefined =\n    proposalData && currentTimestamp && currentBlock\n      ? DateTime.fromSeconds(\n          currentTimestamp\n            .add(BigNumber.from(AVERAGE_BLOCK_TIME_IN_SECS).mul(BigNumber.from(proposalData.endBlock - currentBlock)))\n            .toNumber()\n        )\n      : undefined\n  const now: DateTime = DateTime.local()\n\n  // get total votes and format percentages for UI\n  const totalVotes: number | undefined = proposalData ? proposalData.forCount + proposalData.againstCount : undefined\n  const forPercentage: string =\n    proposalData && totalVotes ? ((proposalData.forCount * 100) / totalVotes).toFixed(0) + '%' : '0%'\n  const againstPercentage: string =\n    proposalData && totalVotes ? ((proposalData.againstCount * 100) / totalVotes).toFixed(0) + '%' : '0%'\n\n  // only count available votes as of the proposal start block\n  const availableVotes: TokenAmount | undefined = useUserVotesAsOfBlock(proposalData?.startBlock ?? undefined)\n\n  // only show voting if user has > 0 votes at proposal start block and proposal is active,\n  const showVotingButtons =\n    availableVotes &&\n    JSBI.greaterThan(availableVotes.raw, JSBI.BigInt(0)) &&\n    proposalData &&\n    proposalData.status === 'active'\n\n  const uniBalance: TokenAmount | undefined = useTokenBalance(account ?? undefined, chainId ? UNI[chainId] : undefined)\n  const userDelegatee: string | undefined = useUserDelegatee()\n\n  // in blurb link to home page if they are able to unlock\n  const showLinkForUnlock = Boolean(\n    uniBalance && JSBI.notEqual(uniBalance.raw, JSBI.BigInt(0)) && userDelegatee === ZERO_ADDRESS\n  )\n\n  // show links in propsoal details if content is an address\n  // if content is contract with common name, replace address with common name\n  const linkIfAddress = (content: string) => {\n    if (isAddress(content) && chainId) {\n      const commonName = COMMON_CONTRACT_NAMES[content] ?? content\n      return <ExternalLink href={getEtherscanLink(chainId, content, 'address')}>{commonName}</ExternalLink>\n    }\n    return <span>{content}</span>\n  }\n\n  return (\n    <PageWrapper gap=\"lg\" justify=\"center\">\n      <VoteModal isOpen={showVoteModal} onDismiss={toggleVoteModal} proposalId={proposalData?.id} support={support} />\n      <DelegateModal isOpen={showDelegateModal} onDismiss={toggleDelegateModal} title=\"Unlock Votes\" />\n      <ProposalInfo gap=\"lg\" justify=\"start\">\n        <RowBetween style={{ width: '100%' }}>\n          <ArrowWrapper to=\"/vote\">\n            <ArrowLeft size={20} /> All Proposals\n          </ArrowWrapper>\n          {proposalData && <ProposalStatus status={proposalData?.status ?? ''}>{proposalData?.status}</ProposalStatus>}\n        </RowBetween>\n        <AutoColumn gap=\"10px\" style={{ width: '100%' }}>\n          <TYPE.largeHeader style={{ marginBottom: '.5rem' }}>{proposalData?.title}</TYPE.largeHeader>\n          <RowBetween>\n            <TYPE.main>\n              {endDate && endDate < now\n                ? 'Voting ended ' + (endDate && endDate.toLocaleString(DateTime.DATETIME_FULL))\n                : proposalData\n                ? 'Voting ends approximately ' + (endDate && endDate.toLocaleString(DateTime.DATETIME_FULL))\n                : ''}\n            </TYPE.main>\n          </RowBetween>\n          {proposalData && proposalData.status === 'active' && !showVotingButtons && (\n            <GreyCard>\n              <TYPE.black>\n                Only UNI votes that were self delegated or delegated to another address before block{' '}\n                {proposalData.startBlock} are eligible for voting.{' '}\n                {showLinkForUnlock && (\n                  <span>\n                    <StyledInternalLink to=\"/vote\">Unlock voting</StyledInternalLink> to prepare for the next proposal.\n                  </span>\n                )}\n              </TYPE.black>\n            </GreyCard>\n          )}\n        </AutoColumn>\n        {showVotingButtons ? (\n          <RowFixed style={{ width: '100%', gap: '12px' }}>\n            <ButtonPrimary\n              padding=\"8px\"\n              borderRadius=\"8px\"\n              onClick={() => {\n                setSupport(true)\n                toggleVoteModal()\n              }}\n            >\n              Vote For\n            </ButtonPrimary>\n            <ButtonPrimary\n              padding=\"8px\"\n              borderRadius=\"8px\"\n              onClick={() => {\n                setSupport(false)\n                toggleVoteModal()\n              }}\n            >\n              Vote Against\n            </ButtonPrimary>\n          </RowFixed>\n        ) : (\n          ''\n        )}\n        <CardWrapper>\n          <StyledDataCard>\n            <CardSection>\n              <AutoColumn gap=\"md\">\n                <WrapSmall>\n                  <TYPE.black fontWeight={600}>For</TYPE.black>\n                  <TYPE.black fontWeight={600}>\n                    {' '}\n                    {proposalData?.forCount.toLocaleString(undefined, { maximumFractionDigits: 0 })}\n                  </TYPE.black>\n                </WrapSmall>\n              </AutoColumn>\n              <ProgressWrapper>\n                <Progress status={'for'} percentageString={forPercentage} />\n              </ProgressWrapper>\n            </CardSection>\n          </StyledDataCard>\n          <StyledDataCard>\n            <CardSection>\n              <AutoColumn gap=\"md\">\n                <WrapSmall>\n                  <TYPE.black fontWeight={600}>Against</TYPE.black>\n                  <TYPE.black fontWeight={600}>\n                    {proposalData?.againstCount.toLocaleString(undefined, { maximumFractionDigits: 0 })}\n                  </TYPE.black>\n                </WrapSmall>\n              </AutoColumn>\n              <ProgressWrapper>\n                <Progress status={'against'} percentageString={againstPercentage} />\n              </ProgressWrapper>\n            </CardSection>\n          </StyledDataCard>\n        </CardWrapper>\n        <AutoColumn gap=\"md\">\n          <TYPE.mediumHeader fontWeight={600}>Details</TYPE.mediumHeader>\n          {proposalData?.details?.map((d, i) => {\n            return (\n              <DetailText key={i}>\n                {i + 1}: {linkIfAddress(d.target)}.{d.functionSig}(\n                {d.callData.split(',').map((content, i) => {\n                  return (\n                    <span key={i}>\n                      {linkIfAddress(content)}\n                      {d.callData.split(',').length - 1 === i ? '' : ','}\n                    </span>\n                  )\n                })}\n                )\n              </DetailText>\n            )\n          })}\n        </AutoColumn>\n        <AutoColumn gap=\"md\">\n          <TYPE.mediumHeader fontWeight={600}>Description</TYPE.mediumHeader>\n          <MarkDownWrapper>\n            <ReactMarkdown source={proposalData?.description} />\n          </MarkDownWrapper>\n        </AutoColumn>\n        <AutoColumn gap=\"md\">\n          <TYPE.mediumHeader fontWeight={600}>Proposer</TYPE.mediumHeader>\n          <ProposerAddressLink\n            href={proposalData?.proposer && chainId ? getEtherscanLink(chainId, proposalData?.proposer, 'address') : ''}\n          >\n            <ReactMarkdown source={proposalData?.proposer} />\n          </ProposerAddressLink>\n        </AutoColumn>\n      </ProposalInfo>\n    </PageWrapper>\n  )\n}\n"]},"metadata":{},"sourceType":"module"}