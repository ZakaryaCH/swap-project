{"ast":null,"code":"var _jsxFileName = \"/Users/chichke/Documents/Work/Freelance/swap-project/src/components/SearchModal/CurrencySearch.tsx\",\n    _s = $RefreshSig$();\n\nimport { ETHER } from \"@uniswap/sdk\";\nimport React, { useCallback, useEffect, useMemo, useRef, useState } from \"react\";\nimport ReactGA from \"react-ga\";\nimport { useTranslation } from \"react-i18next\";\nimport { Text } from \"rebass\";\nimport { useActiveWeb3React } from \"../../hooks\";\nimport { useToken, useIsUserAddedToken, useFoundOnInactiveList } from \"../../hooks/Tokens\";\nimport { CloseIcon, TYPE, ButtonText, IconWrapper } from \"../../theme\";\nimport { isAddress } from \"../../utils\";\nimport Column from \"../Column\";\nimport Row, { RowBetween, RowFixed } from \"../Row\";\nimport CurrencyList from \"./CurrencyList\";\nimport { filterTokens, useSortedTokensByQuery } from \"./filtering\";\nimport { useTokenComparator } from \"./sorting\";\nimport { PaddedColumn, SearchInput, Separator } from \"./styleds\";\nimport AutoSizer from \"react-virtualized-auto-sizer\";\nimport styled from \"styled-components\";\nimport useToggle from \"hooks/useToggle\";\nimport { useOnClickOutside } from \"hooks/useOnClickOutside\";\nimport useTheme from \"hooks/useTheme\";\nimport ImportRow from \"./ImportRow\";\nimport { Edit } from \"react-feather\";\nimport useDebounce from \"hooks/useDebounce\";\nimport getTokenList from \"utils/getTokenList\";\nimport AppBody from \"pages/AppBody\";\nimport Loader from \"components/Loader\";\nimport { useQuery } from \"react-query\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst ContentWrapper = styled(Column)`\n  width: 100%;\n  flex: 1 1;\n  position: relative;\n`;\n_c = ContentWrapper;\nconst Footer = styled.div`\n  width: 100%;\n  border-radius: 20px;\n  padding: 20px;\n  border-top-left-radius: 0;\n  border-top-right-radius: 0;\n  background-color: ${({\n  theme\n}) => theme.bg1};\n  border-top: 1px solid ${({\n  theme\n}) => theme.bg2};\n`;\n_c2 = Footer;\nexport function CurrencySearch({\n  selectedCurrency,\n  onCurrencySelect,\n  otherSelectedCurrency,\n  onDismiss,\n  isOpen,\n  showManageView,\n  showImportView,\n  setImportToken\n}) {\n  _s();\n\n  const {\n    t\n  } = useTranslation();\n  const {\n    chainId\n  } = useActiveWeb3React();\n  const theme = useTheme(); // refs for fixed size lists\n\n  const fixedList = useRef();\n  const [searchQuery, setSearchQuery] = useState(\"\");\n  const debouncedQuery = useDebounce(searchQuery, 200);\n  const [invertSearchOrder] = useState(false);\n  const {\n    data,\n    isLoading,\n    isError\n  } = useQuery(\"tokenList\", getTokenList); // if they input an address, use it\n\n  const isAddressSearch = isAddress(debouncedQuery);\n  const searchToken = useToken(debouncedQuery);\n  const searchTokenIsAdded = useIsUserAddedToken(searchToken);\n  useEffect(() => {\n    if (isAddressSearch) {\n      ReactGA.event({\n        category: \"Currency Select\",\n        action: \"Search by address\",\n        label: isAddressSearch\n      });\n    }\n  }, [isAddressSearch]);\n  const showETH = useMemo(() => {\n    const s = debouncedQuery.toLowerCase().trim();\n    return s === \"\" || s === \"e\" || s === \"et\" || s === \"eth\";\n  }, [debouncedQuery]);\n  const tokenComparator = useTokenComparator(invertSearchOrder);\n  const filteredTokens = useMemo(() => {\n    return filterTokens(Object.values(allTokens), debouncedQuery);\n  }, [allTokens, debouncedQuery]);\n  const sortedTokens = useMemo(() => {\n    return filteredTokens.sort(tokenComparator);\n  }, [filteredTokens, tokenComparator]);\n  const filteredSortedTokens = useSortedTokensByQuery(sortedTokens, debouncedQuery);\n  const handleCurrencySelect = useCallback(currency => {\n    onCurrencySelect(currency);\n    onDismiss();\n  }, [onDismiss, onCurrencySelect]); // clear the input on open\n\n  useEffect(() => {\n    if (isOpen) setSearchQuery(\"\");\n  }, [isOpen]); // manage focus on modal show\n\n  const inputRef = useRef();\n  const handleInput = useCallback(event => {\n    var _fixedList$current;\n\n    const input = event.target.value;\n    const checksummedInput = isAddress(input);\n    setSearchQuery(checksummedInput || input);\n    (_fixedList$current = fixedList.current) === null || _fixedList$current === void 0 ? void 0 : _fixedList$current.scrollTo(0);\n  }, []);\n  const handleEnter = useCallback(e => {\n    if (e.key === \"Enter\") {\n      const s = debouncedQuery.toLowerCase().trim();\n\n      if (s === \"eth\") {\n        handleCurrencySelect(ETHER);\n      } else if (filteredSortedTokens.length > 0) {\n        var _filteredSortedTokens;\n\n        if (((_filteredSortedTokens = filteredSortedTokens[0].symbol) === null || _filteredSortedTokens === void 0 ? void 0 : _filteredSortedTokens.toLowerCase()) === debouncedQuery.trim().toLowerCase() || filteredSortedTokens.length === 1) {\n          handleCurrencySelect(filteredSortedTokens[0]);\n        }\n      }\n    }\n  }, [filteredSortedTokens, handleCurrencySelect, debouncedQuery]); // menu ui\n\n  const [open, toggle] = useToggle(false);\n  const node = useRef();\n  useOnClickOutside(node, open ? toggle : undefined); // if no results on main list, show option to expand into inactive\n\n  const inactiveTokens = useFoundOnInactiveList(debouncedQuery);\n  const filteredInactiveTokens = useSortedTokensByQuery(inactiveTokens, debouncedQuery);\n\n  if (isLoading || !data) {\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: /*#__PURE__*/_jsxDEV(AppBody, {\n        children: /*#__PURE__*/_jsxDEV(Loader, {\n          stroke: \"white\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 186,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 9\n      }, this)\n    }, void 0, false);\n  }\n\n  return /*#__PURE__*/_jsxDEV(ContentWrapper, {\n    children: [/*#__PURE__*/_jsxDEV(PaddedColumn, {\n      gap: \"16px\",\n      children: [/*#__PURE__*/_jsxDEV(RowBetween, {\n        children: [/*#__PURE__*/_jsxDEV(Text, {\n          fontWeight: 500,\n          fontSize: 16,\n          children: \"Select a token\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 196,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(CloseIcon, {\n          onClick: onDismiss\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 199,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 195,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Row, {\n        children: /*#__PURE__*/_jsxDEV(SearchInput, {\n          type: \"text\",\n          id: \"token-search-input\",\n          placeholder: t(\"tokenSearchPlaceholder\"),\n          autoComplete: \"off\",\n          value: searchQuery,\n          ref: inputRef,\n          onChange: handleInput,\n          onKeyDown: handleEnter\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 202,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Separator, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 214,\n      columnNumber: 7\n    }, this), searchToken && !searchTokenIsAdded ? /*#__PURE__*/_jsxDEV(Column, {\n      style: {\n        padding: \"20px 0\",\n        height: \"100%\"\n      },\n      children: /*#__PURE__*/_jsxDEV(ImportRow, {\n        token: searchToken,\n        showImportView: showImportView,\n        setImportToken: setImportToken\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 217,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 216,\n      columnNumber: 9\n    }, this) : (filteredSortedTokens === null || filteredSortedTokens === void 0 ? void 0 : filteredSortedTokens.length) > 0 || (filteredInactiveTokens === null || filteredInactiveTokens === void 0 ? void 0 : filteredInactiveTokens.length) > 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        flex: \"1\"\n      },\n      children: /*#__PURE__*/_jsxDEV(AutoSizer, {\n        disableWidth: true,\n        children: ({\n          height\n        }) => /*#__PURE__*/_jsxDEV(CurrencyList, {\n          height: height,\n          showETH: showETH,\n          currencies: filteredInactiveTokens ? filteredSortedTokens.concat(filteredInactiveTokens) : filteredSortedTokens,\n          breakIndex: inactiveTokens && filteredSortedTokens ? filteredSortedTokens.length : undefined,\n          onCurrencySelect: handleCurrencySelect,\n          otherCurrency: otherSelectedCurrency,\n          selectedCurrency: selectedCurrency,\n          fixedListRef: fixedList,\n          showImportView: showImportView,\n          setImportToken: setImportToken\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 228,\n          columnNumber: 15\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 226,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 225,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(Column, {\n      style: {\n        padding: \"20px\",\n        height: \"100%\"\n      },\n      children: /*#__PURE__*/_jsxDEV(TYPE.main, {\n        color: theme.text3,\n        textAlign: \"center\",\n        mb: \"20px\",\n        children: \"No results found.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 253,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 252,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(Footer, {\n      children: /*#__PURE__*/_jsxDEV(Row, {\n        justify: \"center\",\n        children: /*#__PURE__*/_jsxDEV(ButtonText, {\n          onClick: showManageView,\n          color: theme.blue1,\n          className: \"list-token-manage-button\",\n          children: /*#__PURE__*/_jsxDEV(RowFixed, {\n            children: [/*#__PURE__*/_jsxDEV(IconWrapper, {\n              size: \"16px\",\n              marginRight: \"6px\",\n              children: /*#__PURE__*/_jsxDEV(Edit, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 267,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 266,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(TYPE.main, {\n              color: theme.blue1,\n              children: \"Manage\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 269,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 265,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 260,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 259,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 258,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 193,\n    columnNumber: 5\n  }, this);\n}\n\n_s(CurrencySearch, \"vseULr9Nb1HXq0xuRU1C7+eXyWQ=\", false, function () {\n  return [useTranslation, useActiveWeb3React, useTheme, useDebounce, useQuery, useToken, useIsUserAddedToken, useTokenComparator, useSortedTokensByQuery, useToggle, useOnClickOutside, useFoundOnInactiveList, useSortedTokensByQuery];\n});\n\n_c3 = CurrencySearch;\n\nvar _c, _c2, _c3;\n\n$RefreshReg$(_c, \"ContentWrapper\");\n$RefreshReg$(_c2, \"Footer\");\n$RefreshReg$(_c3, \"CurrencySearch\");","map":{"version":3,"sources":["/Users/chichke/Documents/Work/Freelance/swap-project/src/components/SearchModal/CurrencySearch.tsx"],"names":["ETHER","React","useCallback","useEffect","useMemo","useRef","useState","ReactGA","useTranslation","Text","useActiveWeb3React","useToken","useIsUserAddedToken","useFoundOnInactiveList","CloseIcon","TYPE","ButtonText","IconWrapper","isAddress","Column","Row","RowBetween","RowFixed","CurrencyList","filterTokens","useSortedTokensByQuery","useTokenComparator","PaddedColumn","SearchInput","Separator","AutoSizer","styled","useToggle","useOnClickOutside","useTheme","ImportRow","Edit","useDebounce","getTokenList","AppBody","Loader","useQuery","ContentWrapper","Footer","div","theme","bg1","bg2","CurrencySearch","selectedCurrency","onCurrencySelect","otherSelectedCurrency","onDismiss","isOpen","showManageView","showImportView","setImportToken","t","chainId","fixedList","searchQuery","setSearchQuery","debouncedQuery","invertSearchOrder","data","isLoading","isError","isAddressSearch","searchToken","searchTokenIsAdded","event","category","action","label","showETH","s","toLowerCase","trim","tokenComparator","filteredTokens","Object","values","allTokens","sortedTokens","sort","filteredSortedTokens","handleCurrencySelect","currency","inputRef","handleInput","input","target","value","checksummedInput","current","scrollTo","handleEnter","e","key","length","symbol","open","toggle","node","undefined","inactiveTokens","filteredInactiveTokens","padding","height","flex","concat","text3","blue1"],"mappings":"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","sourcesContent":["import { Currency, ETHER, Token } from \"@uniswap/sdk\";\nimport React, {\n  KeyboardEvent,\n  RefObject,\n  useCallback,\n  useEffect,\n  useMemo,\n  useRef,\n  useState,\n} from \"react\";\nimport ReactGA from \"react-ga\";\nimport { useTranslation } from \"react-i18next\";\nimport { FixedSizeList } from \"react-window\";\nimport { Text } from \"rebass\";\nimport { useActiveWeb3React } from \"../../hooks\";\nimport {\n  useToken,\n  useIsUserAddedToken,\n  useFoundOnInactiveList,\n} from \"../../hooks/Tokens\";\nimport { CloseIcon, TYPE, ButtonText, IconWrapper } from \"../../theme\";\nimport { isAddress } from \"../../utils\";\nimport Column from \"../Column\";\nimport Row, { RowBetween, RowFixed } from \"../Row\";\nimport CurrencyList from \"./CurrencyList\";\nimport { filterTokens, useSortedTokensByQuery } from \"./filtering\";\nimport { useTokenComparator } from \"./sorting\";\nimport { PaddedColumn, SearchInput, Separator } from \"./styleds\";\nimport AutoSizer from \"react-virtualized-auto-sizer\";\nimport styled from \"styled-components\";\nimport useToggle from \"hooks/useToggle\";\nimport { useOnClickOutside } from \"hooks/useOnClickOutside\";\nimport useTheme from \"hooks/useTheme\";\nimport ImportRow from \"./ImportRow\";\nimport { Edit } from \"react-feather\";\nimport useDebounce from \"hooks/useDebounce\";\nimport getTokenList from \"utils/getTokenList\";\nimport AppBody from \"pages/AppBody\";\nimport Loader from \"components/Loader\";\nimport { useQuery } from \"react-query\";\n\nconst ContentWrapper = styled(Column)`\n  width: 100%;\n  flex: 1 1;\n  position: relative;\n`;\n\nconst Footer = styled.div`\n  width: 100%;\n  border-radius: 20px;\n  padding: 20px;\n  border-top-left-radius: 0;\n  border-top-right-radius: 0;\n  background-color: ${({ theme }) => theme.bg1};\n  border-top: 1px solid ${({ theme }) => theme.bg2};\n`;\n\ninterface CurrencySearchProps {\n  isOpen: boolean;\n  onDismiss: () => void;\n  selectedCurrency?: Currency | null;\n  onCurrencySelect: (currency: Currency) => void;\n  otherSelectedCurrency?: Currency | null;\n  showManageView: () => void;\n  showImportView: () => void;\n  setImportToken: (token: Token) => void;\n}\n\nexport function CurrencySearch({\n  selectedCurrency,\n  onCurrencySelect,\n  otherSelectedCurrency,\n  onDismiss,\n  isOpen,\n  showManageView,\n  showImportView,\n  setImportToken,\n}: CurrencySearchProps) {\n  const { t } = useTranslation();\n  const { chainId } = useActiveWeb3React();\n  const theme = useTheme();\n\n  // refs for fixed size lists\n  const fixedList = useRef<FixedSizeList>();\n\n  const [searchQuery, setSearchQuery] = useState<string>(\"\");\n  const debouncedQuery = useDebounce(searchQuery, 200);\n\n  const [invertSearchOrder] = useState<boolean>(false);\n\n  const { data, isLoading, isError } = useQuery(\"tokenList\", getTokenList);\n\n  // if they input an address, use it\n  const isAddressSearch = isAddress(debouncedQuery);\n  const searchToken = useToken(debouncedQuery);\n  const searchTokenIsAdded = useIsUserAddedToken(searchToken);\n\n  useEffect(() => {\n    if (isAddressSearch) {\n      ReactGA.event({\n        category: \"Currency Select\",\n        action: \"Search by address\",\n        label: isAddressSearch,\n      });\n    }\n  }, [isAddressSearch]);\n\n  const showETH: boolean = useMemo(() => {\n    const s = debouncedQuery.toLowerCase().trim();\n    return s === \"\" || s === \"e\" || s === \"et\" || s === \"eth\";\n  }, [debouncedQuery]);\n\n  const tokenComparator = useTokenComparator(invertSearchOrder);\n\n  const filteredTokens: Token[] = useMemo(() => {\n    return filterTokens(Object.values(allTokens), debouncedQuery);\n  }, [allTokens, debouncedQuery]);\n\n  const sortedTokens: Token[] = useMemo(() => {\n    return filteredTokens.sort(tokenComparator);\n  }, [filteredTokens, tokenComparator]);\n\n  const filteredSortedTokens = useSortedTokensByQuery(\n    sortedTokens,\n    debouncedQuery\n  );\n\n  const handleCurrencySelect = useCallback(\n    (currency: Currency) => {\n      onCurrencySelect(currency);\n      onDismiss();\n    },\n    [onDismiss, onCurrencySelect]\n  );\n\n  // clear the input on open\n  useEffect(() => {\n    if (isOpen) setSearchQuery(\"\");\n  }, [isOpen]);\n\n  // manage focus on modal show\n  const inputRef = useRef<HTMLInputElement>();\n  const handleInput = useCallback((event) => {\n    const input = event.target.value;\n    const checksummedInput = isAddress(input);\n    setSearchQuery(checksummedInput || input);\n    fixedList.current?.scrollTo(0);\n  }, []);\n\n  const handleEnter = useCallback(\n    (e: KeyboardEvent<HTMLInputElement>) => {\n      if (e.key === \"Enter\") {\n        const s = debouncedQuery.toLowerCase().trim();\n        if (s === \"eth\") {\n          handleCurrencySelect(ETHER);\n        } else if (filteredSortedTokens.length > 0) {\n          if (\n            filteredSortedTokens[0].symbol?.toLowerCase() ===\n              debouncedQuery.trim().toLowerCase() ||\n            filteredSortedTokens.length === 1\n          ) {\n            handleCurrencySelect(filteredSortedTokens[0]);\n          }\n        }\n      }\n    },\n    [filteredSortedTokens, handleCurrencySelect, debouncedQuery]\n  );\n\n  // menu ui\n  const [open, toggle] = useToggle(false);\n  const node = useRef<HTMLDivElement>();\n  useOnClickOutside(node, open ? toggle : undefined);\n\n  // if no results on main list, show option to expand into inactive\n  const inactiveTokens = useFoundOnInactiveList(debouncedQuery);\n  const filteredInactiveTokens: Token[] = useSortedTokensByQuery(\n    inactiveTokens,\n    debouncedQuery\n  );\n\n  if (isLoading || !data) {\n    return (\n      <>\n        <AppBody>\n          <Loader stroke=\"white\" />\n        </AppBody>\n      </>\n    );\n  }\n\n  return (\n    <ContentWrapper>\n      <PaddedColumn gap=\"16px\">\n        <RowBetween>\n          <Text fontWeight={500} fontSize={16}>\n            Select a token\n          </Text>\n          <CloseIcon onClick={onDismiss} />\n        </RowBetween>\n        <Row>\n          <SearchInput\n            type=\"text\"\n            id=\"token-search-input\"\n            placeholder={t(\"tokenSearchPlaceholder\")}\n            autoComplete=\"off\"\n            value={searchQuery}\n            ref={inputRef as RefObject<HTMLInputElement>}\n            onChange={handleInput}\n            onKeyDown={handleEnter}\n          />\n        </Row>\n      </PaddedColumn>\n      <Separator />\n      {searchToken && !searchTokenIsAdded ? (\n        <Column style={{ padding: \"20px 0\", height: \"100%\" }}>\n          <ImportRow\n            token={searchToken}\n            showImportView={showImportView}\n            setImportToken={setImportToken}\n          />\n        </Column>\n      ) : filteredSortedTokens?.length > 0 ||\n        filteredInactiveTokens?.length > 0 ? (\n        <div style={{ flex: \"1\" }}>\n          <AutoSizer disableWidth>\n            {({ height }) => (\n              <CurrencyList\n                height={height}\n                showETH={showETH}\n                currencies={\n                  filteredInactiveTokens\n                    ? filteredSortedTokens.concat(filteredInactiveTokens)\n                    : filteredSortedTokens\n                }\n                breakIndex={\n                  inactiveTokens && filteredSortedTokens\n                    ? filteredSortedTokens.length\n                    : undefined\n                }\n                onCurrencySelect={handleCurrencySelect}\n                otherCurrency={otherSelectedCurrency}\n                selectedCurrency={selectedCurrency}\n                fixedListRef={fixedList}\n                showImportView={showImportView}\n                setImportToken={setImportToken}\n              />\n            )}\n          </AutoSizer>\n        </div>\n      ) : (\n        <Column style={{ padding: \"20px\", height: \"100%\" }}>\n          <TYPE.main color={theme.text3} textAlign=\"center\" mb=\"20px\">\n            No results found.\n          </TYPE.main>\n        </Column>\n      )}\n      <Footer>\n        <Row justify=\"center\">\n          <ButtonText\n            onClick={showManageView}\n            color={theme.blue1}\n            className=\"list-token-manage-button\"\n          >\n            <RowFixed>\n              <IconWrapper size=\"16px\" marginRight=\"6px\">\n                <Edit />\n              </IconWrapper>\n              <TYPE.main color={theme.blue1}>Manage</TYPE.main>\n            </RowFixed>\n          </ButtonText>\n        </Row>\n      </Footer>\n    </ContentWrapper>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}