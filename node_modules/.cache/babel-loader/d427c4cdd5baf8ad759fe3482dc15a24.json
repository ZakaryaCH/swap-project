{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport { nanoid } from \"@reduxjs/toolkit\";\nimport { ChainId } from \"@uniswap/sdk\";\nimport { useCallback } from \"react\";\nimport { useDispatch } from \"react-redux\";\nimport { getNetworkLibrary } from \"../connectors\";\nimport { fetchTokenList } from \"../state/lists/actions\";\nimport getTokenList from \"../utils/getTokenList\";\nimport resolveENSContentHash from \"../utils/resolveENSContentHash\";\nimport { useActiveWeb3React } from \"./index\";\nexport function useFetchListCallback() {\n  _s();\n\n  const {\n    chainId,\n    library\n  } = useActiveWeb3React();\n  const dispatch = useDispatch();\n  const ensResolver = useCallback(ensName => {\n    if (!library || chainId !== ChainId.MAINNET) {\n      const networkLibrary = getNetworkLibrary();\n\n      if (networkLibrary) {\n        return resolveENSContentHash(ensName, networkLibrary);\n      }\n\n      throw new Error(\"Could not construct mainnet ENS resolver\");\n    }\n\n    return resolveENSContentHash(ensName, library);\n  }, [chainId, library]); // note: prevent dispatch if using for list search or unsupported list\n\n  return useCallback(async (listUrl, sendDispatch = true) => {\n    const requestId = nanoid();\n    sendDispatch && dispatch(fetchTokenList.pending({\n      requestId,\n      url: listUrl\n    }));\n    return getTokenList().then(tokenList => {\n      sendDispatch && dispatch(fetchTokenList.fulfilled({\n        url: listUrl,\n        tokenList,\n        requestId\n      }));\n      return tokenList;\n    }).catch(error => {\n      console.debug(`Failed to get list at url ${listUrl}`, error);\n      sendDispatch && dispatch(fetchTokenList.rejected({\n        url: listUrl,\n        requestId,\n        errorMessage: error.message\n      }));\n      throw error;\n    });\n  }, [dispatch, ensResolver]);\n}\n\n_s(useFetchListCallback, \"bPF8hnilu9tIi3RDorgSSluO4uI=\", false, function () {\n  return [useActiveWeb3React, useDispatch];\n});","map":{"version":3,"sources":["/Users/chichke/Documents/Work/Freelance/swap-project/src/hooks/useFetchListCallback.ts"],"names":["nanoid","ChainId","useCallback","useDispatch","getNetworkLibrary","fetchTokenList","getTokenList","resolveENSContentHash","useActiveWeb3React","useFetchListCallback","chainId","library","dispatch","ensResolver","ensName","MAINNET","networkLibrary","Error","listUrl","sendDispatch","requestId","pending","url","then","tokenList","fulfilled","catch","error","console","debug","rejected","errorMessage","message"],"mappings":";;AAAA,SAASA,MAAT,QAAuB,kBAAvB;AACA,SAASC,OAAT,QAAwB,cAAxB;AAEA,SAASC,WAAT,QAA4B,OAA5B;AACA,SAASC,WAAT,QAA4B,aAA5B;AACA,SAASC,iBAAT,QAAkC,eAAlC;AAEA,SAASC,cAAT,QAA+B,wBAA/B;AACA,OAAOC,YAAP,MAAyB,uBAAzB;AACA,OAAOC,qBAAP,MAAkC,gCAAlC;AACA,SAASC,kBAAT,QAAmC,SAAnC;AAEA,OAAO,SAASC,oBAAT,GAGiB;AAAA;;AACtB,QAAM;AAAEC,IAAAA,OAAF;AAAWC,IAAAA;AAAX,MAAuBH,kBAAkB,EAA/C;AACA,QAAMI,QAAQ,GAAGT,WAAW,EAA5B;AAEA,QAAMU,WAAW,GAAGX,WAAW,CAC5BY,OAAD,IAAqB;AACnB,QAAI,CAACH,OAAD,IAAYD,OAAO,KAAKT,OAAO,CAACc,OAApC,EAA6C;AAC3C,YAAMC,cAAc,GAAGZ,iBAAiB,EAAxC;;AACA,UAAIY,cAAJ,EAAoB;AAClB,eAAOT,qBAAqB,CAACO,OAAD,EAAUE,cAAV,CAA5B;AACD;;AAED,YAAM,IAAIC,KAAJ,CAAU,0CAAV,CAAN;AACD;;AACD,WAAOV,qBAAqB,CAACO,OAAD,EAAUH,OAAV,CAA5B;AACD,GAX4B,EAY7B,CAACD,OAAD,EAAUC,OAAV,CAZ6B,CAA/B,CAJsB,CAmBtB;;AACA,SAAOT,WAAW,CAChB,OAAOgB,OAAP,EAAwBC,YAAY,GAAG,IAAvC,KAAgD;AAC9C,UAAMC,SAAS,GAAGpB,MAAM,EAAxB;AACAmB,IAAAA,YAAY,IACVP,QAAQ,CAACP,cAAc,CAACgB,OAAf,CAAuB;AAAED,MAAAA,SAAF;AAAaE,MAAAA,GAAG,EAAEJ;AAAlB,KAAvB,CAAD,CADV;AAEA,WAAOZ,YAAY,GAChBiB,IADI,CACEC,SAAD,IAAe;AACnBL,MAAAA,YAAY,IACVP,QAAQ,CACNP,cAAc,CAACoB,SAAf,CAAyB;AAAEH,QAAAA,GAAG,EAAEJ,OAAP;AAAgBM,QAAAA,SAAhB;AAA2BJ,QAAAA;AAA3B,OAAzB,CADM,CADV;AAIA,aAAOI,SAAP;AACD,KAPI,EAQJE,KARI,CAQGC,KAAD,IAAW;AAChBC,MAAAA,OAAO,CAACC,KAAR,CAAe,6BAA4BX,OAAQ,EAAnD,EAAsDS,KAAtD;AACAR,MAAAA,YAAY,IACVP,QAAQ,CACNP,cAAc,CAACyB,QAAf,CAAwB;AACtBR,QAAAA,GAAG,EAAEJ,OADiB;AAEtBE,QAAAA,SAFsB;AAGtBW,QAAAA,YAAY,EAAEJ,KAAK,CAACK;AAHE,OAAxB,CADM,CADV;AAQA,YAAML,KAAN;AACD,KAnBI,CAAP;AAoBD,GAzBe,EA0BhB,CAACf,QAAD,EAAWC,WAAX,CA1BgB,CAAlB;AA4BD;;GAnDeJ,oB;UAIeD,kB,EACZL,W","sourcesContent":["import { nanoid } from \"@reduxjs/toolkit\";\nimport { ChainId } from \"@uniswap/sdk\";\nimport { TokenList } from \"@uniswap/token-lists\";\nimport { useCallback } from \"react\";\nimport { useDispatch } from \"react-redux\";\nimport { getNetworkLibrary } from \"../connectors\";\nimport { AppDispatch } from \"../state\";\nimport { fetchTokenList } from \"../state/lists/actions\";\nimport getTokenList from \"../utils/getTokenList\";\nimport resolveENSContentHash from \"../utils/resolveENSContentHash\";\nimport { useActiveWeb3React } from \"./index\";\n\nexport function useFetchListCallback(): (\n  listUrl: string,\n  sendDispatch?: boolean\n) => Promise<TokenList> {\n  const { chainId, library } = useActiveWeb3React();\n  const dispatch = useDispatch<AppDispatch>();\n\n  const ensResolver = useCallback(\n    (ensName: string) => {\n      if (!library || chainId !== ChainId.MAINNET) {\n        const networkLibrary = getNetworkLibrary();\n        if (networkLibrary) {\n          return resolveENSContentHash(ensName, networkLibrary);\n        }\n\n        throw new Error(\"Could not construct mainnet ENS resolver\");\n      }\n      return resolveENSContentHash(ensName, library);\n    },\n    [chainId, library]\n  );\n\n  // note: prevent dispatch if using for list search or unsupported list\n  return useCallback(\n    async (listUrl: string, sendDispatch = true) => {\n      const requestId = nanoid();\n      sendDispatch &&\n        dispatch(fetchTokenList.pending({ requestId, url: listUrl }));\n      return getTokenList()\n        .then((tokenList) => {\n          sendDispatch &&\n            dispatch(\n              fetchTokenList.fulfilled({ url: listUrl, tokenList, requestId })\n            );\n          return tokenList;\n        })\n        .catch((error) => {\n          console.debug(`Failed to get list at url ${listUrl}`, error);\n          sendDispatch &&\n            dispatch(\n              fetchTokenList.rejected({\n                url: listUrl,\n                requestId,\n                errorMessage: error.message,\n              })\n            );\n          throw error;\n        });\n    },\n    [dispatch, ensResolver]\n  );\n}\n"]},"metadata":{},"sourceType":"module"}