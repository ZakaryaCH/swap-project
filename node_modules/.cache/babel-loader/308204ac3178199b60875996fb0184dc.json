{"ast":null,"code":"var _jsxFileName = \"/Users/chichke/Documents/Work/Freelance/swap-project/src/pages/Vote/VotePage.tsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from \"react\";\nimport { AutoColumn } from \"../../components/Column\";\nimport styled from \"styled-components\";\nimport { TYPE, StyledInternalLink, ExternalLink } from \"../../theme\";\nimport { RowFixed, RowBetween } from \"../../components/Row\";\nimport { CardSection, DataCard } from \"../../components/earn/styled\";\nimport { ArrowLeft } from \"react-feather\";\nimport { ButtonPrimary } from \"../../components/Button\";\nimport { ProposalStatus } from \"./styled\";\nimport { useProposalData, useUserVotesAsOfBlock, useUserDelegatee } from \"../../state/governance/hooks\";\nimport { DateTime } from \"luxon\";\nimport ReactMarkdown from \"react-markdown\";\nimport VoteModal from \"../../components/vote/VoteModal\";\nimport { JSBI } from \"@uniswap/sdk\";\nimport { useActiveWeb3React } from \"../../hooks\";\nimport { AVERAGE_BLOCK_TIME_IN_SECS, ZERO_ADDRESS } from \"../../constants\";\nimport { isAddress, getEtherscanLink } from \"../../utils\";\nimport { ApplicationModal } from \"../../state/application/actions\";\nimport { useModalOpen, useToggleDelegateModal, useToggleVoteModal, useBlockNumber } from \"../../state/application/hooks\";\nimport DelegateModal from \"../../components/vote/DelegateModal\";\nimport { GreyCard } from \"../../components/Card\";\nimport { useTokenBalance } from \"../../state/wallet/hooks\";\nimport useCurrentBlockTimestamp from \"hooks/useCurrentBlockTimestamp\";\nimport { BigNumber } from \"ethers\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst PageWrapper = styled(AutoColumn)`\n  width: 100%;\n`;\n_c = PageWrapper;\nconst ProposalInfo = styled(AutoColumn)`\n  border: 1px solid ${({\n  theme\n}) => theme.bg4};\n  border-radius: 12px;\n  padding: 1.5rem;\n  position: relative;\n  max-width: 640px;\n  width: 100%;\n`;\n_c2 = ProposalInfo;\nconst ArrowWrapper = styled(StyledInternalLink)`\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  height: 24px;\n  color: ${({\n  theme\n}) => theme.text1};\n\n  a {\n    color: ${({\n  theme\n}) => theme.text1};\n    text-decoration: none;\n  }\n  :hover {\n    text-decoration: none;\n  }\n`;\n_c3 = ArrowWrapper;\nconst CardWrapper = styled.div`\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n  gap: 12px;\n  width: 100%;\n`;\n_c4 = CardWrapper;\nconst StyledDataCard = styled(DataCard)`\n  width: 100%;\n  background: none;\n  background-color: ${({\n  theme\n}) => theme.bg1};\n  height: fit-content;\n  z-index: 2;\n`;\n_c5 = StyledDataCard;\nconst ProgressWrapper = styled.div`\n  width: 100%;\n  margin-top: 1rem;\n  height: 4px;\n  border-radius: 4px;\n  background-color: ${({\n  theme\n}) => theme.bg3};\n  position: relative;\n`;\n_c6 = ProgressWrapper;\nconst Progress = styled.div`\n  height: 4px;\n  border-radius: 4px;\n  background-color: ${({\n  theme,\n  status\n}) => status === \"for\" ? theme.green1 : theme.red1};\n  width: ${({\n  percentageString\n}) => percentageString};\n`;\n_c7 = Progress;\nconst MarkDownWrapper = styled.div`\n  max-width: 640px;\n  overflow: hidden;\n`;\n_c8 = MarkDownWrapper;\nconst WrapSmall = styled(RowBetween)`\n  ${({\n  theme\n}) => theme.mediaWidth.upToSmall`\n    align-items: flex-start;\n    flex-direction: column;\n  `};\n`;\n_c9 = WrapSmall;\nconst DetailText = styled.div`\n  word-break: break-all;\n`;\n_c10 = DetailText;\nconst ProposerAddressLink = styled(ExternalLink)`\n  word-break: break-all;\n`;\n_c11 = ProposerAddressLink;\nexport default function VotePage({\n  match: {\n    params: {\n      id\n    }\n  }\n}) {\n  _s();\n\n  var _proposalData$startBl, _proposalData$status, _proposalData$details;\n\n  const {\n    chainId,\n    account\n  } = useActiveWeb3React(); // get data for this specific proposal\n\n  const proposalData = useProposalData(id); // update support based on button interactions\n\n  const [support, setSupport] = useState(true); // modal for casting votes\n\n  const showVoteModal = useModalOpen(ApplicationModal.VOTE);\n  const toggleVoteModal = useToggleVoteModal(); // toggle for showing delegation modal\n\n  const showDelegateModal = useModalOpen(ApplicationModal.DELEGATE);\n  const toggleDelegateModal = useToggleDelegateModal(); // get and format date from data\n\n  const currentTimestamp = useCurrentBlockTimestamp();\n  const currentBlock = useBlockNumber();\n  const endDate = proposalData && currentTimestamp && currentBlock ? DateTime.fromSeconds(currentTimestamp.add(BigNumber.from(AVERAGE_BLOCK_TIME_IN_SECS).mul(BigNumber.from(proposalData.endBlock - currentBlock))).toNumber()) : undefined;\n  const now = DateTime.local(); // get total votes and format percentages for UI\n\n  const totalVotes = proposalData ? proposalData.forCount + proposalData.againstCount : undefined;\n  const forPercentage = proposalData && totalVotes ? (proposalData.forCount * 100 / totalVotes).toFixed(0) + \"%\" : \"0%\";\n  const againstPercentage = proposalData && totalVotes ? (proposalData.againstCount * 100 / totalVotes).toFixed(0) + \"%\" : \"0%\"; // only count available votes as of the proposal start block\n\n  const availableVotes = useUserVotesAsOfBlock((_proposalData$startBl = proposalData === null || proposalData === void 0 ? void 0 : proposalData.startBlock) !== null && _proposalData$startBl !== void 0 ? _proposalData$startBl : undefined); // only show voting if user has > 0 votes at proposal start block and proposal is active,\n\n  const showVotingButtons = availableVotes && JSBI.greaterThan(availableVotes.raw, JSBI.BigInt(0)) && proposalData && proposalData.status === \"active\";\n  const uniBalance = useTokenBalance(account !== null && account !== void 0 ? account : undefined, chainId ? UNI[chainId] : undefined);\n  const userDelegatee = useUserDelegatee(); // in blurb link to home page if they are able to unlock\n\n  const showLinkForUnlock = Boolean(uniBalance && JSBI.notEqual(uniBalance.raw, JSBI.BigInt(0)) && userDelegatee === ZERO_ADDRESS); // show links in propsoal details if content is an address\n  // if content is contract with common name, replace address with common name\n\n  const linkIfAddress = content => {\n    if (isAddress(content) && chainId) {\n      var _COMMON_CONTRACT_NAME;\n\n      const commonName = (_COMMON_CONTRACT_NAME = COMMON_CONTRACT_NAMES[content]) !== null && _COMMON_CONTRACT_NAME !== void 0 ? _COMMON_CONTRACT_NAME : content;\n      return /*#__PURE__*/_jsxDEV(ExternalLink, {\n        href: getEtherscanLink(chainId, content, \"address\"),\n        children: commonName\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 202,\n        columnNumber: 9\n      }, this);\n    }\n\n    return /*#__PURE__*/_jsxDEV(\"span\", {\n      children: content\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 207,\n      columnNumber: 12\n    }, this);\n  };\n\n  return /*#__PURE__*/_jsxDEV(PageWrapper, {\n    gap: \"lg\",\n    justify: \"center\",\n    children: [/*#__PURE__*/_jsxDEV(VoteModal, {\n      isOpen: showVoteModal,\n      onDismiss: toggleVoteModal,\n      proposalId: proposalData === null || proposalData === void 0 ? void 0 : proposalData.id,\n      support: support\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 212,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(DelegateModal, {\n      isOpen: showDelegateModal,\n      onDismiss: toggleDelegateModal,\n      title: \"Unlock Votes\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 218,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(ProposalInfo, {\n      gap: \"lg\",\n      justify: \"start\",\n      children: [/*#__PURE__*/_jsxDEV(RowBetween, {\n        style: {\n          width: \"100%\"\n        },\n        children: [/*#__PURE__*/_jsxDEV(ArrowWrapper, {\n          to: \"/vote\",\n          children: [/*#__PURE__*/_jsxDEV(ArrowLeft, {\n            size: 20\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 226,\n            columnNumber: 13\n          }, this), \" All Proposals\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 225,\n          columnNumber: 11\n        }, this), proposalData && /*#__PURE__*/_jsxDEV(ProposalStatus, {\n          status: (_proposalData$status = proposalData === null || proposalData === void 0 ? void 0 : proposalData.status) !== null && _proposalData$status !== void 0 ? _proposalData$status : \"\",\n          children: proposalData === null || proposalData === void 0 ? void 0 : proposalData.status\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 229,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 224,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(AutoColumn, {\n        gap: \"10px\",\n        style: {\n          width: \"100%\"\n        },\n        children: [/*#__PURE__*/_jsxDEV(TYPE.largeHeader, {\n          style: {\n            marginBottom: \".5rem\"\n          },\n          children: proposalData === null || proposalData === void 0 ? void 0 : proposalData.title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 235,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(RowBetween, {\n          children: /*#__PURE__*/_jsxDEV(TYPE.main, {\n            children: endDate && endDate < now ? \"Voting ended \" + (endDate && endDate.toLocaleString(DateTime.DATETIME_FULL)) : proposalData ? \"Voting ends approximately \" + (endDate && endDate.toLocaleString(DateTime.DATETIME_FULL)) : \"\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 239,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 238,\n          columnNumber: 11\n        }, this), proposalData && proposalData.status === \"active\" && !showVotingButtons && /*#__PURE__*/_jsxDEV(GreyCard, {\n          children: /*#__PURE__*/_jsxDEV(TYPE.black, {\n            children: [\"Only UNI votes that were self delegated or delegated to another address before block \", proposalData.startBlock, \" are eligible for voting.\", \" \", showLinkForUnlock && /*#__PURE__*/_jsxDEV(\"span\", {\n              children: [/*#__PURE__*/_jsxDEV(StyledInternalLink, {\n                to: \"/vote\",\n                children: \"Unlock voting\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 259,\n                columnNumber: 23\n              }, this), \" \", \"to prepare for the next proposal.\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 258,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 253,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 252,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 234,\n        columnNumber: 9\n      }, this), showVotingButtons ? /*#__PURE__*/_jsxDEV(RowFixed, {\n        style: {\n          width: \"100%\",\n          gap: \"12px\"\n        },\n        children: [/*#__PURE__*/_jsxDEV(ButtonPrimary, {\n          padding: \"8px\",\n          borderRadius: \"8px\",\n          onClick: () => {\n            setSupport(true);\n            toggleVoteModal();\n          },\n          children: \"Vote For\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 271,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(ButtonPrimary, {\n          padding: \"8px\",\n          borderRadius: \"8px\",\n          onClick: () => {\n            setSupport(false);\n            toggleVoteModal();\n          },\n          children: \"Vote Against\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 281,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 270,\n        columnNumber: 11\n      }, this) : \"\", /*#__PURE__*/_jsxDEV(CardWrapper, {\n        children: [/*#__PURE__*/_jsxDEV(StyledDataCard, {\n          children: /*#__PURE__*/_jsxDEV(CardSection, {\n            children: [/*#__PURE__*/_jsxDEV(AutoColumn, {\n              gap: \"md\",\n              children: /*#__PURE__*/_jsxDEV(WrapSmall, {\n                children: [/*#__PURE__*/_jsxDEV(TYPE.black, {\n                  fontWeight: 600,\n                  children: \"For\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 300,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(TYPE.black, {\n                  fontWeight: 600,\n                  children: [\" \", proposalData === null || proposalData === void 0 ? void 0 : proposalData.forCount.toLocaleString(undefined, {\n                    maximumFractionDigits: 0\n                  })]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 301,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 299,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 298,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(ProgressWrapper, {\n              children: /*#__PURE__*/_jsxDEV(Progress, {\n                status: \"for\",\n                percentageString: forPercentage\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 310,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 309,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 297,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 296,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(StyledDataCard, {\n          children: /*#__PURE__*/_jsxDEV(CardSection, {\n            children: [/*#__PURE__*/_jsxDEV(AutoColumn, {\n              gap: \"md\",\n              children: /*#__PURE__*/_jsxDEV(WrapSmall, {\n                children: [/*#__PURE__*/_jsxDEV(TYPE.black, {\n                  fontWeight: 600,\n                  children: \"Against\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 318,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(TYPE.black, {\n                  fontWeight: 600,\n                  children: proposalData === null || proposalData === void 0 ? void 0 : proposalData.againstCount.toLocaleString(undefined, {\n                    maximumFractionDigits: 0\n                  })\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 319,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 317,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 316,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(ProgressWrapper, {\n              children: /*#__PURE__*/_jsxDEV(Progress, {\n                status: \"against\",\n                percentageString: againstPercentage\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 327,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 326,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 315,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 314,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 295,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(AutoColumn, {\n        gap: \"md\",\n        children: [/*#__PURE__*/_jsxDEV(TYPE.mediumHeader, {\n          fontWeight: 600,\n          children: \"Details\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 336,\n          columnNumber: 11\n        }, this), proposalData === null || proposalData === void 0 ? void 0 : (_proposalData$details = proposalData.details) === null || _proposalData$details === void 0 ? void 0 : _proposalData$details.map((d, i) => {\n          return /*#__PURE__*/_jsxDEV(DetailText, {\n            children: [i + 1, \": \", linkIfAddress(d.target), \".\", d.functionSig, \"(\", d.callData.split(\",\").map((content, i) => {\n              return /*#__PURE__*/_jsxDEV(\"span\", {\n                children: [linkIfAddress(content), d.callData.split(\",\").length - 1 === i ? \"\" : \",\"]\n              }, i, true, {\n                fileName: _jsxFileName,\n                lineNumber: 343,\n                columnNumber: 21\n              }, this);\n            }), \")\"]\n          }, i, true, {\n            fileName: _jsxFileName,\n            lineNumber: 339,\n            columnNumber: 15\n          }, this);\n        })]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 335,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(AutoColumn, {\n        gap: \"md\",\n        children: [/*#__PURE__*/_jsxDEV(TYPE.mediumHeader, {\n          fontWeight: 600,\n          children: \"Description\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 355,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(MarkDownWrapper, {\n          children: /*#__PURE__*/_jsxDEV(ReactMarkdown, {\n            source: proposalData === null || proposalData === void 0 ? void 0 : proposalData.description\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 357,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 356,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 354,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(AutoColumn, {\n        gap: \"md\",\n        children: [/*#__PURE__*/_jsxDEV(TYPE.mediumHeader, {\n          fontWeight: 600,\n          children: \"Proposer\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 361,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(ProposerAddressLink, {\n          href: (proposalData === null || proposalData === void 0 ? void 0 : proposalData.proposer) && chainId ? getEtherscanLink(chainId, proposalData === null || proposalData === void 0 ? void 0 : proposalData.proposer, \"address\") : \"\",\n          children: /*#__PURE__*/_jsxDEV(ReactMarkdown, {\n            source: proposalData === null || proposalData === void 0 ? void 0 : proposalData.proposer\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 369,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 362,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 360,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 223,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 211,\n    columnNumber: 5\n  }, this);\n}\n\n_s(VotePage, \"Jmj7TeHWmExbN+eq46TWbqDhNuM=\", false, function () {\n  return [useActiveWeb3React, useProposalData, useModalOpen, useToggleVoteModal, useModalOpen, useToggleDelegateModal, useCurrentBlockTimestamp, useBlockNumber, useUserVotesAsOfBlock, useTokenBalance, useUserDelegatee];\n});\n\n_c12 = VotePage;\n\nvar _c, _c2, _c3, _c4, _c5, _c6, _c7, _c8, _c9, _c10, _c11, _c12;\n\n$RefreshReg$(_c, \"PageWrapper\");\n$RefreshReg$(_c2, \"ProposalInfo\");\n$RefreshReg$(_c3, \"ArrowWrapper\");\n$RefreshReg$(_c4, \"CardWrapper\");\n$RefreshReg$(_c5, \"StyledDataCard\");\n$RefreshReg$(_c6, \"ProgressWrapper\");\n$RefreshReg$(_c7, \"Progress\");\n$RefreshReg$(_c8, \"MarkDownWrapper\");\n$RefreshReg$(_c9, \"WrapSmall\");\n$RefreshReg$(_c10, \"DetailText\");\n$RefreshReg$(_c11, \"ProposerAddressLink\");\n$RefreshReg$(_c12, \"VotePage\");","map":{"version":3,"sources":["/Users/chichke/Documents/Work/Freelance/swap-project/src/pages/Vote/VotePage.tsx"],"names":["React","useState","AutoColumn","styled","TYPE","StyledInternalLink","ExternalLink","RowFixed","RowBetween","CardSection","DataCard","ArrowLeft","ButtonPrimary","ProposalStatus","useProposalData","useUserVotesAsOfBlock","useUserDelegatee","DateTime","ReactMarkdown","VoteModal","JSBI","useActiveWeb3React","AVERAGE_BLOCK_TIME_IN_SECS","ZERO_ADDRESS","isAddress","getEtherscanLink","ApplicationModal","useModalOpen","useToggleDelegateModal","useToggleVoteModal","useBlockNumber","DelegateModal","GreyCard","useTokenBalance","useCurrentBlockTimestamp","BigNumber","PageWrapper","ProposalInfo","theme","bg4","ArrowWrapper","text1","CardWrapper","div","StyledDataCard","bg1","ProgressWrapper","bg3","Progress","status","green1","red1","percentageString","MarkDownWrapper","WrapSmall","mediaWidth","upToSmall","DetailText","ProposerAddressLink","VotePage","match","params","id","chainId","account","proposalData","support","setSupport","showVoteModal","VOTE","toggleVoteModal","showDelegateModal","DELEGATE","toggleDelegateModal","currentTimestamp","currentBlock","endDate","fromSeconds","add","from","mul","endBlock","toNumber","undefined","now","local","totalVotes","forCount","againstCount","forPercentage","toFixed","againstPercentage","availableVotes","startBlock","showVotingButtons","greaterThan","raw","BigInt","uniBalance","UNI","userDelegatee","showLinkForUnlock","Boolean","notEqual","linkIfAddress","content","commonName","COMMON_CONTRACT_NAMES","width","marginBottom","title","toLocaleString","DATETIME_FULL","gap","maximumFractionDigits","details","map","d","i","target","functionSig","callData","split","length","description","proposer"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\nimport { AutoColumn } from \"../../components/Column\";\nimport styled from \"styled-components\";\n\nimport { RouteComponentProps } from \"react-router-dom\";\nimport { TYPE, StyledInternalLink, ExternalLink } from \"../../theme\";\nimport { RowFixed, RowBetween } from \"../../components/Row\";\nimport { CardSection, DataCard } from \"../../components/earn/styled\";\nimport { ArrowLeft } from \"react-feather\";\nimport { ButtonPrimary } from \"../../components/Button\";\nimport { ProposalStatus } from \"./styled\";\nimport {\n  useProposalData,\n  useUserVotesAsOfBlock,\n  ProposalData,\n  useUserDelegatee,\n} from \"../../state/governance/hooks\";\nimport { DateTime } from \"luxon\";\nimport ReactMarkdown from \"react-markdown\";\nimport VoteModal from \"../../components/vote/VoteModal\";\nimport { TokenAmount, JSBI } from \"@uniswap/sdk\";\nimport { useActiveWeb3React } from \"../../hooks\";\nimport { AVERAGE_BLOCK_TIME_IN_SECS, ZERO_ADDRESS } from \"../../constants\";\nimport { isAddress, getEtherscanLink } from \"../../utils\";\nimport { ApplicationModal } from \"../../state/application/actions\";\nimport {\n  useModalOpen,\n  useToggleDelegateModal,\n  useToggleVoteModal,\n  useBlockNumber,\n} from \"../../state/application/hooks\";\nimport DelegateModal from \"../../components/vote/DelegateModal\";\nimport { GreyCard } from \"../../components/Card\";\nimport { useTokenBalance } from \"../../state/wallet/hooks\";\nimport useCurrentBlockTimestamp from \"hooks/useCurrentBlockTimestamp\";\nimport { BigNumber } from \"ethers\";\n\nconst PageWrapper = styled(AutoColumn)`\n  width: 100%;\n`;\n\nconst ProposalInfo = styled(AutoColumn)`\n  border: 1px solid ${({ theme }) => theme.bg4};\n  border-radius: 12px;\n  padding: 1.5rem;\n  position: relative;\n  max-width: 640px;\n  width: 100%;\n`;\nconst ArrowWrapper = styled(StyledInternalLink)`\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  height: 24px;\n  color: ${({ theme }) => theme.text1};\n\n  a {\n    color: ${({ theme }) => theme.text1};\n    text-decoration: none;\n  }\n  :hover {\n    text-decoration: none;\n  }\n`;\nconst CardWrapper = styled.div`\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n  gap: 12px;\n  width: 100%;\n`;\n\nconst StyledDataCard = styled(DataCard)`\n  width: 100%;\n  background: none;\n  background-color: ${({ theme }) => theme.bg1};\n  height: fit-content;\n  z-index: 2;\n`;\n\nconst ProgressWrapper = styled.div`\n  width: 100%;\n  margin-top: 1rem;\n  height: 4px;\n  border-radius: 4px;\n  background-color: ${({ theme }) => theme.bg3};\n  position: relative;\n`;\n\nconst Progress = styled.div<{\n  status: \"for\" | \"against\";\n  percentageString?: string;\n}>`\n  height: 4px;\n  border-radius: 4px;\n  background-color: ${({ theme, status }) =>\n    status === \"for\" ? theme.green1 : theme.red1};\n  width: ${({ percentageString }) => percentageString};\n`;\n\nconst MarkDownWrapper = styled.div`\n  max-width: 640px;\n  overflow: hidden;\n`;\n\nconst WrapSmall = styled(RowBetween)`\n  ${({ theme }) => theme.mediaWidth.upToSmall`\n    align-items: flex-start;\n    flex-direction: column;\n  `};\n`;\n\nconst DetailText = styled.div`\n  word-break: break-all;\n`;\n\nconst ProposerAddressLink = styled(ExternalLink)`\n  word-break: break-all;\n`;\n\nexport default function VotePage({\n  match: {\n    params: { id },\n  },\n}: RouteComponentProps<{ id: string }>) {\n  const { chainId, account } = useActiveWeb3React();\n\n  // get data for this specific proposal\n  const proposalData: ProposalData | undefined = useProposalData(id);\n\n  // update support based on button interactions\n  const [support, setSupport] = useState<boolean>(true);\n\n  // modal for casting votes\n  const showVoteModal = useModalOpen(ApplicationModal.VOTE);\n  const toggleVoteModal = useToggleVoteModal();\n\n  // toggle for showing delegation modal\n  const showDelegateModal = useModalOpen(ApplicationModal.DELEGATE);\n  const toggleDelegateModal = useToggleDelegateModal();\n\n  // get and format date from data\n  const currentTimestamp = useCurrentBlockTimestamp();\n  const currentBlock = useBlockNumber();\n  const endDate: DateTime | undefined =\n    proposalData && currentTimestamp && currentBlock\n      ? DateTime.fromSeconds(\n          currentTimestamp\n            .add(\n              BigNumber.from(AVERAGE_BLOCK_TIME_IN_SECS).mul(\n                BigNumber.from(proposalData.endBlock - currentBlock)\n              )\n            )\n            .toNumber()\n        )\n      : undefined;\n  const now: DateTime = DateTime.local();\n\n  // get total votes and format percentages for UI\n  const totalVotes: number | undefined = proposalData\n    ? proposalData.forCount + proposalData.againstCount\n    : undefined;\n  const forPercentage: string =\n    proposalData && totalVotes\n      ? ((proposalData.forCount * 100) / totalVotes).toFixed(0) + \"%\"\n      : \"0%\";\n  const againstPercentage: string =\n    proposalData && totalVotes\n      ? ((proposalData.againstCount * 100) / totalVotes).toFixed(0) + \"%\"\n      : \"0%\";\n\n  // only count available votes as of the proposal start block\n  const availableVotes: TokenAmount | undefined = useUserVotesAsOfBlock(\n    proposalData?.startBlock ?? undefined\n  );\n\n  // only show voting if user has > 0 votes at proposal start block and proposal is active,\n  const showVotingButtons =\n    availableVotes &&\n    JSBI.greaterThan(availableVotes.raw, JSBI.BigInt(0)) &&\n    proposalData &&\n    proposalData.status === \"active\";\n\n  const uniBalance: TokenAmount | undefined = useTokenBalance(\n    account ?? undefined,\n    chainId ? UNI[chainId] : undefined\n  );\n  const userDelegatee: string | undefined = useUserDelegatee();\n\n  // in blurb link to home page if they are able to unlock\n  const showLinkForUnlock = Boolean(\n    uniBalance &&\n      JSBI.notEqual(uniBalance.raw, JSBI.BigInt(0)) &&\n      userDelegatee === ZERO_ADDRESS\n  );\n\n  // show links in propsoal details if content is an address\n  // if content is contract with common name, replace address with common name\n  const linkIfAddress = (content: string) => {\n    if (isAddress(content) && chainId) {\n      const commonName = COMMON_CONTRACT_NAMES[content] ?? content;\n      return (\n        <ExternalLink href={getEtherscanLink(chainId, content, \"address\")}>\n          {commonName}\n        </ExternalLink>\n      );\n    }\n    return <span>{content}</span>;\n  };\n\n  return (\n    <PageWrapper gap=\"lg\" justify=\"center\">\n      <VoteModal\n        isOpen={showVoteModal}\n        onDismiss={toggleVoteModal}\n        proposalId={proposalData?.id}\n        support={support}\n      />\n      <DelegateModal\n        isOpen={showDelegateModal}\n        onDismiss={toggleDelegateModal}\n        title=\"Unlock Votes\"\n      />\n      <ProposalInfo gap=\"lg\" justify=\"start\">\n        <RowBetween style={{ width: \"100%\" }}>\n          <ArrowWrapper to=\"/vote\">\n            <ArrowLeft size={20} /> All Proposals\n          </ArrowWrapper>\n          {proposalData && (\n            <ProposalStatus status={proposalData?.status ?? \"\"}>\n              {proposalData?.status}\n            </ProposalStatus>\n          )}\n        </RowBetween>\n        <AutoColumn gap=\"10px\" style={{ width: \"100%\" }}>\n          <TYPE.largeHeader style={{ marginBottom: \".5rem\" }}>\n            {proposalData?.title}\n          </TYPE.largeHeader>\n          <RowBetween>\n            <TYPE.main>\n              {endDate && endDate < now\n                ? \"Voting ended \" +\n                  (endDate && endDate.toLocaleString(DateTime.DATETIME_FULL))\n                : proposalData\n                ? \"Voting ends approximately \" +\n                  (endDate && endDate.toLocaleString(DateTime.DATETIME_FULL))\n                : \"\"}\n            </TYPE.main>\n          </RowBetween>\n          {proposalData &&\n            proposalData.status === \"active\" &&\n            !showVotingButtons && (\n              <GreyCard>\n                <TYPE.black>\n                  Only UNI votes that were self delegated or delegated to\n                  another address before block {proposalData.startBlock} are\n                  eligible for voting.{\" \"}\n                  {showLinkForUnlock && (\n                    <span>\n                      <StyledInternalLink to=\"/vote\">\n                        Unlock voting\n                      </StyledInternalLink>{\" \"}\n                      to prepare for the next proposal.\n                    </span>\n                  )}\n                </TYPE.black>\n              </GreyCard>\n            )}\n        </AutoColumn>\n        {showVotingButtons ? (\n          <RowFixed style={{ width: \"100%\", gap: \"12px\" }}>\n            <ButtonPrimary\n              padding=\"8px\"\n              borderRadius=\"8px\"\n              onClick={() => {\n                setSupport(true);\n                toggleVoteModal();\n              }}\n            >\n              Vote For\n            </ButtonPrimary>\n            <ButtonPrimary\n              padding=\"8px\"\n              borderRadius=\"8px\"\n              onClick={() => {\n                setSupport(false);\n                toggleVoteModal();\n              }}\n            >\n              Vote Against\n            </ButtonPrimary>\n          </RowFixed>\n        ) : (\n          \"\"\n        )}\n        <CardWrapper>\n          <StyledDataCard>\n            <CardSection>\n              <AutoColumn gap=\"md\">\n                <WrapSmall>\n                  <TYPE.black fontWeight={600}>For</TYPE.black>\n                  <TYPE.black fontWeight={600}>\n                    {\" \"}\n                    {proposalData?.forCount.toLocaleString(undefined, {\n                      maximumFractionDigits: 0,\n                    })}\n                  </TYPE.black>\n                </WrapSmall>\n              </AutoColumn>\n              <ProgressWrapper>\n                <Progress status={\"for\"} percentageString={forPercentage} />\n              </ProgressWrapper>\n            </CardSection>\n          </StyledDataCard>\n          <StyledDataCard>\n            <CardSection>\n              <AutoColumn gap=\"md\">\n                <WrapSmall>\n                  <TYPE.black fontWeight={600}>Against</TYPE.black>\n                  <TYPE.black fontWeight={600}>\n                    {proposalData?.againstCount.toLocaleString(undefined, {\n                      maximumFractionDigits: 0,\n                    })}\n                  </TYPE.black>\n                </WrapSmall>\n              </AutoColumn>\n              <ProgressWrapper>\n                <Progress\n                  status={\"against\"}\n                  percentageString={againstPercentage}\n                />\n              </ProgressWrapper>\n            </CardSection>\n          </StyledDataCard>\n        </CardWrapper>\n        <AutoColumn gap=\"md\">\n          <TYPE.mediumHeader fontWeight={600}>Details</TYPE.mediumHeader>\n          {proposalData?.details?.map((d, i) => {\n            return (\n              <DetailText key={i}>\n                {i + 1}: {linkIfAddress(d.target)}.{d.functionSig}(\n                {d.callData.split(\",\").map((content, i) => {\n                  return (\n                    <span key={i}>\n                      {linkIfAddress(content)}\n                      {d.callData.split(\",\").length - 1 === i ? \"\" : \",\"}\n                    </span>\n                  );\n                })}\n                )\n              </DetailText>\n            );\n          })}\n        </AutoColumn>\n        <AutoColumn gap=\"md\">\n          <TYPE.mediumHeader fontWeight={600}>Description</TYPE.mediumHeader>\n          <MarkDownWrapper>\n            <ReactMarkdown source={proposalData?.description} />\n          </MarkDownWrapper>\n        </AutoColumn>\n        <AutoColumn gap=\"md\">\n          <TYPE.mediumHeader fontWeight={600}>Proposer</TYPE.mediumHeader>\n          <ProposerAddressLink\n            href={\n              proposalData?.proposer && chainId\n                ? getEtherscanLink(chainId, proposalData?.proposer, \"address\")\n                : \"\"\n            }\n          >\n            <ReactMarkdown source={proposalData?.proposer} />\n          </ProposerAddressLink>\n        </AutoColumn>\n      </ProposalInfo>\n    </PageWrapper>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}